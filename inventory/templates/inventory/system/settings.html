{% extends 'inventory/base.html' %}
{% load static %}

{% block title %}系统设置{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/system-settings.css' %}">
{% endblock %}

{% block content %}
<div class="system-settings-page">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb bg-white py-2 px-3 rounded-3 shadow-sm">
            <li class="breadcrumb-item"><a href="{% url 'index' %}">主页</a></li>
            <li class="breadcrumb-item active" aria-current="page">系统设置</li>
        </ol>
    </nav>

    <section class="settings-hero mb-4">
        <div class="settings-hero__inner">
            <h1 class="h3 mb-2">系统设置中心</h1>
            <p class="mb-0 text-muted">统一管理账号、日志、备份与系统运行配置。</p>
        </div>
    </section>

    <div class="row g-4 mb-4">
        <div class="col-lg-4">
            <div class="settings-card h-100">
                <div class="settings-card__header">
                    <h2 class="h6 mb-0">账号与审计</h2>
                </div>
                <div class="settings-card__body">
                    <a href="{% url 'user_list' %}" class="settings-tile">
                        <span class="settings-tile__icon bg-primary-subtle text-primary"><i class="bi bi-people"></i></span>
                        <span class="settings-tile__content">
                            <strong>用户管理</strong>
                            <small>创建账号、分配角色与仓库权限。</small>
                        </span>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                    <a href="{% url 'log_list' %}" class="settings-tile">
                        <span class="settings-tile__icon bg-secondary-subtle text-secondary"><i class="bi bi-journal-text"></i></span>
                        <span class="settings-tile__content">
                            <strong>日志管理</strong>
                            <small>查看系统日志和用户操作轨迹。</small>
                        </span>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="settings-card h-100">
                <div class="settings-card__header">
                    <h2 class="h6 mb-0">业务配置</h2>
                </div>
                <div class="settings-card__body">
                    <a href="{% url 'store_settings' %}" class="settings-tile">
                        <span class="settings-tile__icon bg-warning-subtle text-warning-emphasis"><i class="bi bi-shop"></i></span>
                        <span class="settings-tile__content">
                            <strong>商店设置</strong>
                            <small>维护店铺名称、地址、联系电话与启用状态。</small>
                        </span>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                    <a href="{% url 'system_info' %}" class="settings-tile">
                        <span class="settings-tile__icon bg-info-subtle text-info-emphasis"><i class="bi bi-cpu"></i></span>
                        <span class="settings-tile__content">
                            <strong>系统信息</strong>
                            <small>查看运行环境、数据库规模和资源概况。</small>
                        </span>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="settings-card h-100">
                <div class="settings-card__header">
                    <h2 class="h6 mb-0">运维与恢复</h2>
                </div>
                <div class="settings-card__body">
                    <a href="{% url 'backup_list' %}" class="settings-tile">
                        <span class="settings-tile__icon bg-success-subtle text-success"><i class="bi bi-database"></i></span>
                        <span class="settings-tile__content">
                            <strong>备份管理</strong>
                            <small>创建、恢复和下载系统备份。</small>
                        </span>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                    <a href="{% url 'system_maintenance' %}" class="settings-tile settings-tile--danger">
                        <span class="settings-tile__icon bg-danger-subtle text-danger"><i class="bi bi-tools"></i></span>
                        <span class="settings-tile__content">
                            <strong>系统维护</strong>
                            <small>执行会话清理、日志裁剪与数据库优化。</small>
                        </span>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="settings-card settings-card--config mb-4">
        <div class="settings-card__header">
            <h2 class="h6 mb-0">当前系统配置</h2>
        </div>
        <div class="settings-card__body">
            <div class="row g-3">
                <div class="col-md-6 col-xl-4">
                    <div class="config-item">
                        <span class="config-item__label">系统版本</span>
                        <span class="config-item__value">{{ settings.version }}</span>
                    </div>
                </div>
                <div class="col-md-6 col-xl-4">
                    <div class="config-item">
                        <span class="config-item__label">调试模式</span>
                        <span class="config-item__value">{{ settings.debug_mode|yesno:"启用,禁用" }}</span>
                    </div>
                </div>
                <div class="col-md-6 col-xl-4">
                    <div class="config-item">
                        <span class="config-item__label">系统时区</span>
                        <span class="config-item__value">{{ settings.timezone }}</span>
                    </div>
                </div>
                <div class="col-md-6 col-xl-4">
                    <div class="config-item">
                        <span class="config-item__label">数据库引擎</span>
                        <span class="config-item__value">{{ settings.database_engine }}</span>
                    </div>
                </div>
                <div class="col-md-6 col-xl-8">
                    <div class="config-item">
                        <span class="config-item__label">媒体目录</span>
                        <span class="config-item__value config-item__value--mono">{{ settings.media_root }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
